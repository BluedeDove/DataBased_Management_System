# 智能图书管理系统 - 用户指南

## 目录
1. [测试账号](#测试账号)
2. [自动编号生成](#自动编号生成)
3. [AI功能配置](#ai功能配置)
4. [高级搜索功能](#高级搜索功能)
5. [多角色权限系统](#多角色权限系统)
6. [常见问题](#常见问题)

---

## 测试账号

系统提供四种角色的测试账号供您体验不同权限级别：

| 角色 | 用户名 | 密码 | 权限说明 |
|------|--------|------|----------|
| 👑 管理员 | admin | admin123 | 完全权限，可以访问所有功能 |
| 📚 图书管理员 | librarian | lib123 | 可以管理图书、读者、借阅记录，查看统计 |
| 👨‍🏫 教师 | teacher | teach123 | 可以浏览图书、借阅图书、查看统计 |
| 👨‍🎓 学生 | student | student123 | 可以浏览图书、借阅图书 |

> **注意**: 首次启动时，系统会自动创建这些测试账号。

---

## 自动编号生成

系统支持为读者和图书自动生成唯一编号，简化录入流程。

### 2.1 读者编号自动生成

- **格式**: `{种类代码}{YYYYMMDD}{4位序号}`
- **示例**:
  - `STUDENT202510280001` (学生类第1个，2025年10月28日)
  - `TEACHER202510280001` (教师类第1个，2025年10月28日)

- **使用方法**:
  1. 在"读者管理"页面点击"新增读者"
  2. 将"读者编号"字段**留空**或填写 **`AUTO`**
  3. 选择读者种类后提交
  4. 系统会根据种类和当前日期自动生成唯一编号

- **编号规则**:
  - 每天每种类别的序号从0001开始
  - 同一天同一类别的序号递增
  - 编号一旦生成不可修改

### 2.2 图书ISBN自动生成

- **格式**: `{类别代码}-{YYYY}-{6位序号}`
- **示例**:
  - `TP-2025-000001` (计算机科学类第1本书，2025年)
  - `I-2025-000001` (文学类第1本书，2025年)
  - `K-2025-000001` (历史地理类第1本书，2025年)

- **使用方法**:
  1. 在"图书管理"页面点击"新增图书"
  2. 将"ISBN"字段**留空**或填写 **`AUTO`**
  3. 选择图书类别后提交
  4. 系统会根据类别和年份自动生成唯一ISBN

- **编号规则**:
  - 每年每类别的序号从000001开始
  - 同一年同一类别的序号递增
  - 支持手动输入标准ISBN（会验证重复）

---

## AI功能配置

系统集成了OpenAI的AI能力，提供语义搜索、智能推荐和对话助手功能。

### 3.1 配置步骤

1. 使用**管理员账号**登录（admin/admin123）
2. 进入左侧菜单的"系统设置"页面
3. 选择"**AI配置**"标签页
4. 填写以下信息：

   | 配置项 | 说明 | 默认值 |
   |--------|------|--------|
   | API URL | OpenAI API服务地址 | https://api.openai.com/v1 |
   | API Key | 您的OpenAI API密钥 | (需要填写) |
   | Embedding Model | 文本向量模型 | text-embedding-3-small |
   | Chat Model | 对话模型 | gpt-4-turbo-preview |

5. 点击"**测试连接**"按钮验证配置是否正确
6. 确认无误后点击"**保存配置**"

### 3.2 AI功能介绍

#### 语义搜索 (Semantic Search)
使用AI理解查询意图，而不是简单的关键词匹配。

**示例查询**:
- ✅ "适合初学者的编程书籍"
- ✅ "关于机器学习的入门读物"
- ✅ "经典的中国历史小说"

#### 智能推荐 (RAG)
基于您的需求，结合图书馆现有藏书，提供个性化推荐。

#### AI助手
实时对话式助手，回答图书相关问题。

**使用位置**: 左侧菜单 → "AI助手"

> **注意**:
> - AI功能需要有效的OpenAI API Key
> - API调用会产生费用，请合理使用
> - 如果没有配置API Key，系统会降级为传统搜索

---

## 高级搜索功能

系统提供多种搜索方式，满足不同场景需求。

### 4.1 条件搜索 (Advanced Search)

支持以下字段的**组合搜索**：

| 搜索字段 | 说明 | 示例 |
|----------|------|------|
| 书名 | 模糊匹配 | "计算机" |
| 作者 | 模糊匹配 | "张三" |
| 出版社 | 模糊匹配 | "清华大学出版社" |
| 图书类别 | 精确匹配 | 计算机科学 |
| 出版日期范围 | 起止日期 | 2020-01-01 ~ 2025-12-31 |
| 价格范围 | 最小/最大 | 30.00 ~ 100.00 |
| 关键词 | 跨字段搜索 | "Python编程" |
| 图书状态 | 精确匹配 | 正常/损坏/丢失 |

**使用方法**:
1. 在"图书管理"页面点击"高级搜索"
2. 填写一个或多个搜索条件
3. 点击"搜索"查看结果

**特点**:
- 所有条件使用 AND 逻辑（同时满足）
- 空字段会被忽略
- 支持部分匹配

### 4.2 正则表达式搜索 (Regex Search)

使用正则表达式进行复杂模式匹配，适合有经验的用户。

**常用正则示例**:

```regex
^计算机        # 查找以"计算机"开头的图书
Java|Python    # 查找包含Java或Python的图书
\d{4}年        # 查找包含"xxxx年"格式的内容
张.*明         # 查找张x明格式的作者名
[0-9]{13}      # 查找13位数字（如ISBN）
```

**使用方法**:
1. 在搜索页面选择"正则搜索"选项
2. 输入正则表达式模式
3. 选择搜索字段（可多选）：
   - 书名
   - 作者
   - 描述/简介
4. 点击"搜索"

**注意事项**:
- 正则表达式不区分大小写
- 语法错误会给出明确提示
- 复杂正则可能影响性能

### 4.3 向量/语义搜索 (Vector Search)

使用AI技术进行语义相似度搜索，无需精确匹配关键词。

**示例查询**:
- "适合初学者的编程书籍"
- "关于机器学习的入门读物"
- "历史类畅销书推荐"
- "讲述二战的非虚构作品"

**特点**:
- 理解查询语义，不仅仅是关键词匹配
- 可以找到语义相近但用词不同的图书
- 显示相似度百分比
- 需要预先生成图书向量（在AI助手页面批量生成）

**使用前提**:
1. 已配置有效的OpenAI API Key
2. 已为图书生成向量（管理员功能）

---

## 多角色权限系统

系统采用基于角色的权限控制（RBAC），不同角色看到不同的界面和功能。

### 5.1 权限矩阵

| 功能模块 | 管理员 | 图书管理员 | 教师 | 学生 |
|----------|--------|-----------|------|------|
| 📊 仪表盘 | ✅ 完整 | ✅ 完整 | ✅ 简化 | ✅ 简化 |
| 📚 图书浏览 | ✅ | ✅ | ✅ | ✅ |
| ➕ 图书管理 | ✅ | ✅ | ❌ | ❌ |
| 👥 读者浏览 | ✅ | ✅ | ❌ | ❌ |
| ➕ 读者管理 | ✅ | ✅ | ❌ | ❌ |
| 📖 借阅图书 | ✅ | ✅ | ✅ | ✅ |
| 📋 借阅管理 | ✅ | ✅ | ❌ | ❌ |
| 📈 统计报表 | ✅ | ✅ | ✅ | ❌ |
| ⚙️ 系统设置 | ✅ | ❌ | ❌ | ❌ |
| 🤖 AI配置 | ✅ | ❌ | ❌ | ❌ |
| 🔍 高级搜索 | ✅ | ✅ | ✅ | ✅ |
| 💬 AI助手 | ✅ | ✅ | ✅ | ✅ |

### 5.2 角色详细说明

#### 👑 管理员 (Admin)
**职责**: 系统管理与配置

**可访问功能**:
- ✅ 所有模块的完全访问权限
- ✅ 系统设置和配置
- ✅ AI功能配置
- ✅ 用户管理（未来功能）
- ✅ 高级搜索（含SQL查询）

**典型操作**:
- 配置AI服务
- 管理系统参数
- 查看完整统计报表
- 数据导出与备份

#### 📚 图书管理员 (Librarian)
**职责**: 日常图书馆运营管理

**可访问功能**:
- ✅ 图书的增删改查
- ✅ 读者的增删改查
- ✅ 借阅业务处理（借书、还书、续借）
- ✅ 统计报表查看
- ✅ 高级搜索功能
- ❌ 系统配置

**典型操作**:
- 新书入库登记
- 读者证办理
- 处理借还书业务
- 处理逾期罚款
- 生成业务报表

#### 👨‍🏫 教师 (Teacher)
**职责**: 教学与科研用书借阅

**可访问功能**:
- ✅ 浏览图书信息
- ✅ 借阅图书
- ✅ 查看个人借阅记录
- ✅ 查看统计信息
- ✅ 使用AI推荐
- ❌ 管理功能

**特点**:
- 借阅数量和期限较学生更宽松
- 可查看系统统计信息
- 界面相对简洁

#### 👨‍🎓 学生 (Student)
**职责**: 学习用书借阅

**可访问功能**:
- ✅ 浏览图书信息
- ✅ 借阅图书
- ✅ 查看个人借阅记录
- ✅ 使用搜索和AI助手
- ❌ 统计报表
- ❌ 管理功能

**特点**:
- 界面最简洁，专注于借阅
- 较低的借阅限制
- 更短的借阅期限

---

## 常见问题

### Q1: 如何重置密码？
**A**: 请联系管理员重置密码。管理员可以在用户管理模块中修改任何用户的密码。

### Q2: 为什么我看不到某些菜单或功能？
**A**: 不同角色有不同的权限。菜单会根据您的角色动态显示。如果您需要更多权限，请联系管理员升级您的账号角色。

### Q3: AI功能无法使用怎么办？
**A**: 请按以下步骤排查：
1. 确认是否已配置OpenAI API Key（需要管理员权限）
2. 点击"测试连接"验证配置是否正确
3. 确认API Key有效且账户有足够余额
4. 检查网络连接是否正常
5. 如果使用国内网络，可能需要配置代理

### Q4: 自动生成的编号可以修改吗？
**A**:
- 编号一旦生成**不建议修改**，因为它是唯一标识符
- 如需使用自定义编号，请在创建时**直接输入具体值**
- 系统会自动验证编号的唯一性

### Q5: 正则搜索出错怎么办？
**A**:
- 请检查正则表达式语法是否正确
- 系统会提示具体的错误信息
- 可以使用在线正则测试工具验证表达式
- 常见错误：未转义特殊字符（如 `.` `*` `+` `?` 等）

### Q6: 如何批量导入图书数据？
**A**:
- 当前版本支持通过测试数据生成器批量添加
- 后续版本将支持CSV/Excel导入功能
- 如需批量导入，请联系技术支持

### Q7: 借阅期限是多少？
**A**: 借阅期限取决于读者类别：
- 学生：通常30天
- 教师：通常60天
- 具体期限由管理员在"读者种类"设置中配置

### Q8: 如何查看我的借阅历史？
**A**:
1. 登录系统
2. 进入"借阅管理"或"我的借阅"（根据角色）
3. 可以看到当前借阅和历史借阅记录

### Q9: 可以续借几次？
**A**:
- 默认最多续借2次
- 每次续借延长一个借阅周期
- 逾期图书不能续借
- 具体规则可由管理员配置

### Q10: 系统支持哪些浏览器？
**A**:
- 这是Electron桌面应用，无需浏览器
- 支持Windows 10/11, macOS 10.13+, Linux
- 建议使用最新版本以获得最佳体验

---

## 技术支持

如果您在使用过程中遇到问题：

1. 📖 查看本用户指南
2. 📄 查看项目文档（README.md, ARCHITECTURE.md）
3. 🐛 提交Issue到项目仓库
4. 💬 联系系统管理员

---

**版本**: v1.0.0
**最后更新**: 2025-10-28
**开发框架**: Electron + Vue3 + TypeScript
